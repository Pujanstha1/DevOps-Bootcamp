# 6. Command Substitution and Arithmetic

## 6.1 Command Substitution
- Command substitution allows the output of a command to be **used as a value** in a variable or another command.

### Syntax
```bash
$(command)
`command`
```
- `$(...)` → preferred modern syntax
- `` `...` `` → older syntax, less readable

### Examples
```bash
current_date=$(date +"%Y-%m-%d")
echo "Today's date is $current_date"

files_count=`ls | wc -l`
echo "There are $files_count files in the directory"
```
- Output of `date` or `ls | wc -l` is stored in a variable

---

## 6.2 Arithmetic Operations
- Shell can perform basic arithmetic using **`$((expression))`**
- Only supports **integer arithmetic** by default

### Syntax
```bash
result=$((2 + 3))
echo $result  # Output: 5
```

### Operators
- Addition: `+`
- Subtraction: `-`
- Multiplication: `*`
- Division: `/`
- Modulus: `%`
- Exponent: `**`

### Examples
```bash
x=10
y=3
sum=$((x + y))
diff=$((x - y))
prod=$((x * y))
quot=$((x / y))
mod=$((x % y))
exp=$((x ** y))

echo "Sum: $sum, Diff: $diff, Prod: $prod, Quot: $quot, Mod: $mod, Exp: $exp"
```

---

## 6.3 Using `let` Command
- Alternative method for arithmetic
```bash
let result=5+3
echo $result  # Output: 8

let x+=2       # Increment x by 2
```

---

## 6.4 Using `expr`
- Another alternative for arithmetic (less preferred)
```bash
expr 5 + 3      # Output: 8
expr $x \* 2    # Multiplication requires escape
```

---

## 6.5 Practical Examples
1. Command substitution with file count:
```bash
files=$(ls /tmp | wc -l)
echo "There are $files files in /tmp"
```
2. Arithmetic for calculating disk usage:
```bash
used=1024
total=2048
percent=$((used * 100 / total))
echo "Disk used: $percent%"
```
3. Increment counter in a loop:
```bash
counter=0
for i in 1 2 3; do
  counter=$((counter + 1))
done
echo $counter  # Output: 3
```

---

## Summary
- **Command substitution**: `$(command)` or `` `command` `` stores command output
- **Arithmetic**: `$((expression))`, `let`, or `expr`
- Supports **basic math**, increment, and complex expressions
- Combining substitution and arithmetic makes scripts **dynamic and functional**

