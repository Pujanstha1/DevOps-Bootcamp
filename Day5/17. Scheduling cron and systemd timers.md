# 17. Scheduling: cron and systemd timers

Scheduling allows scripts and commands to **run automatically at specified times**.

---

## 17.1 cron Jobs
- cron is a daemon that runs scheduled tasks
- Edit user crontab with `crontab -e`

### cron Syntax
```
* * * * * command_to_run
- - - - -
| | | | |
| | | | +---- Day of week (0-7) (Sunday=0 or 7)
| | | +------ Month (1-12)
| | +-------- Day of month (1-31)
| +---------- Hour (0-23)
+------------ Minute (0-59)
```

### Examples
1. Run script every day at 3am:
```
0 3 * * * /home/user/backup.sh
```
2. Run every 5 minutes:
```
*/5 * * * * /home/user/check.sh
```
3. Run every Monday at 6am:
```
0 6 * * 1 /home/user/weekly_report.sh
```

### List and Remove cron jobs
```bash
crontab -l   # List jobs
crontab -r   # Remove all jobs
```

---

## 17.2 Systemd Timers
- Modern alternative to cron
- Uses **.timer** and **.service** units

### Example: Daily Backup
1. Create `/etc/systemd/system/backup.service`
```ini
[Unit]
Description=Daily Backup
[Service]
Type=oneshot
ExecStart=/home/user/backup.sh
```
2. Create `/etc/systemd/system/backup.timer`
```ini
[Unit]
Description=Run backup daily
[Timer]
OnCalendar=daily
Persistent=true
[Install]
WantedBy=timers.target
```
3. Enable and start timer
```bash
sudo systemctl enable --now backup.timer
sudo systemctl start backup.timer
```

### Check timer status
```bash
systemctl list-timers
systemctl status backup.timer
```

---

## Practical Examples
1. Run cleanup script every hour using cron:
```
0 * * * * /home/user/cleanup.sh
```
2. Systemd timer to run script at 9am weekdays:
```ini
OnCalendar=Mon..Fri 09:00
```
3. Logging cron output:
```
0 2 * * * /home/user/backup.sh >> /var/log/backup.log 2>&1
```

---

## Summary
- **cron** → simple scheduling using time fields
- **systemd timers** → modern scheduling with `.timer` and `.service`
- **OnCalendar** → flexible scheduling expressions
- Scheduli